# Issue #6: Implement GCov Text Parser (REVISED APPROACH)

## User Story
As a Fortran developer using gfortran, I want to parse gcov text output so that I can generate coverage reports for my code quickly and reliably.

## Acceptance Criteria
- [ ] Implement coverage_parser_t interface for gcov text format
- [ ] Parse .gcov text files generated by gcov command
- [ ] Extract execution counts and line numbers correctly
- [ ] Handle Fortran-specific constructs from gcov output

## ARCHITECTURAL CHANGE
**This issue now focuses on TEXT parsing, not binary parsing.**
- Depends on Issue #5 (gcov command execution) 
- Parses the generated .gcov text files
- Much simpler than binary format parsing
- Leverages GCC's own format handling

## Gcov Text Format Example
```
        -:    0:Source:test.f90
        -:    0:Graph:test.gcno
        -:    0:Data:test.gcda
        1:    1:program test
        2:    2:    print *, "hello"
    #####:    3:    if (.false.) print *, "never"
        -:    4:end program
```

## Test Specifications (RED Phase)

### Test 1: Parse basic gcov line format
**Given**: Gcov line "    2:    5:    x = y + 1"
**When**: Parsing line
**Then**: Should extract execution_count=2, line_number=5, content="    x = y + 1"

### Test 2: Handle non-executable lines
**Given**: Gcov line "    -:    1:! This is a comment"
**When**: Parsing line
**Then**: Should mark as non-executable with execution_count=-1

### Test 3: Handle unexecuted lines
**Given**: Gcov line "#####:   10:    never_reached = 1"
**When**: Parsing line
**Then**: Should mark as executable=true, execution_count=0

### Test 4: Parse module procedures
**Given**: Gcov output with Fortran module structure
**When**: Parsing module source
**Then**: Should correctly identify parent module for each procedure

### Test 5: Handle function sections
**Given**: Gcov output with function separation (------ lines)
**When**: Parsing function boundaries
**Then**: Should track function names and execution counts

### Test 6: Parse header information
**Given**: Gcov header lines (Source:, Graph:, Data:)
**When**: Parsing file header
**Then**: Should extract source filename and coverage data paths

### Test 7: Handle missing coverage data
**Given**: Gcov file with no Data: line (no .gcda)
**When**: Parsing coverage
**Then**: Should mark all lines as execution_count=0

### Test 8: Parse multiple files in single gcov run
**Given**: Gcov output covering multiple source files
**When**: Parsing multi-file output
**Then**: Should separate coverage by source file correctly

### Test 9: Handle Fortran line continuation
**Given**: Gcov output with continued lines
**When**: Parsing coverage
**Then**: Should properly handle continuation markers

### Test 10: Extract branch coverage (if available)
**Given**: Gcov output with -b flag (branch coverage)
**When**: Parsing branch information
**Then**: Should extract taken/not-taken branch counts

## Implementation Notes (GREEN Phase)
- Use simple line-by-line text parsing
- Regular expressions for line format parsing
- Build coverage_data_t from parsed text
- Handle gcov format variations gracefully

## Technical Details
- File: `src/gcov_text_parser.f90` (RENAMED: was gcov_parser.f90)
- Test file: `test/test_gcov_text_parser.f90`
- Dependencies: coverage_parser, gcov_command_executor, coverage_model
- Test data: Real .gcov files generated by gfortran
- **Benefit**: ~200 lines instead of 1000+ lines of binary parsing